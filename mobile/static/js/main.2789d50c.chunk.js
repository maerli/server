(this.webpackJsonpmobile=this.webpackJsonpmobile||[]).push([[0],{49:function(e,t,a){e.exports=a(94)},54:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},86:function(e,t){},89:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(45),s=a.n(o),c=(a(54),a(8)),i=a(9),l=a(11),u=a(10),d=a(12),p=a(1),m=a.n(p),h=(a(56),a(57),a(46)),f=a.n(h),v=(a(89),a(26)),b=a.n(v),w=a(15),y=a(7),E=window.android&&window.android.ipAddress||window.location.protocol+"//"+window.location.hostname,k=E+":4000",g=f()(k);window.document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");b.a.Modal.init(e)}));var x={mesa:null,categoria:null,produtos:[],garcon:window.android&&window.android.getUser()||window.localStorage.getItem("user"),total:0,data:Date.now(),status:0,display:"block"};function j(e){e.setState({cancelar:r.a.createElement("div",{className:"card horizontal"},r.a.createElement("div",{className:"card-content"},"Se voc\xea sair desta tela seu pedido n\xe3o ser\xe1 conclu\xeddo. Sair mesmo assim?",r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){window.history.back(),x={mesa:null,categoria:null,produtos:[],garcon:window.android&&window.android.getUser()||window.localStorage.getItem("user"),total:0,data:Date.now(),status:0,display:"block"}},className:"btn green"}," Sim "),r.a.createElement("button",{className:"btn red",onClick:function(){return e.setState({cancelar:""})}}," N\xe3o ")))})}function O(){var e,t,a,n,r,o,s,c,i;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=(e=x).mesa,a=e.garcon,n=e.data,r=e.status,o=e.total,s=e.produtos,l.next=3,m.a.awrap(fetch(k+"/insert/pedidos",{method:"POST",headers:{"Content-Type":"application/json",Accept:"aplication/json"},body:JSON.stringify({mesa:t,garcon:a,data:n,status:r,total:o,produtos:JSON.stringify(s)})}));case 3:return c=l.sent,l.next=6,m.a.awrap(c.json());case 6:i=l.sent,console.log(i),g.emit("newPedido");case 9:case"end":return l.stop()}}))}window.goback=function(e){window.location.href===E+":4000/mobile/categorias"?j(e):window.history.back()};var N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).style={footer:{position:"absolute",bottom:10,left:0,textAlign:"center",width:"100%",color:"black",fontWeight:"bold"}},a.state={display:x.display,pedido_pronto:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){g.on("novo_pedido",(function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(fetch(k+"/select/pedidos/id_pedido/"+e.id_pedido));case 2:return t=n.sent,n.next=5,m.a.awrap(t.json());case 5:a=n.sent[0],a.garcon,1===a.status&&window.android.notification("preparado pedido!","Pedido n\xb0 "+a.id_pedido+" est\xe1 sendo preparado!"),2===a.status&&window.android.notification("Pedido pronto!"," Pedido n\xba "+a.id_pedido+" est\xe1 pronto");case 9:case"end":return n.stop()}}))}))}},{key:"_hide",value:function(){x.display="block"===x.display?"none":"block",this.setState({display:x.display})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(w.a,null,r.a.createElement(w.b,{to:"/mobile/pedidos"}," ",this.state.pedido_pronto,"  "),r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/mobile",exact:!0,render:function(){return r.a.createElement(C,null)}}),r.a.createElement(y.a,{path:"/mobile/categorias",exact:!0,render:function(){return r.a.createElement(_,{mesa:x.mesa})}}),r.a.createElement(y.a,{path:"/mobile/categorias/produtos",render:function(){return r.a.createElement(D,{categoria:x.categoria})}}),r.a.createElement(y.a,{path:"/mobile/pedidos",component:S})),r.a.createElement(y.a,{path:"/mobile/categorias",render:function(){return r.a.createElement("div",null,r.a.createElement("footer",{style:e.style.footer},r.a.createElement("div",{style:{display:e.state.display}},r.a.createElement("table",{className:"card",style:{backgroundColor:"white"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Produto")," ",r.a.createElement("th",null,"Valor")," ",r.a.createElement("th",null,"Quantidade"))),r.a.createElement("tbody",null," ",x.produtos.map((function(e){return r.a.createElement("tr",{key:e.id_produto},r.a.createElement("td",null,e.nome)," ",r.a.createElement("td",null," R$ ",e.preco.toFixed(2))," ",r.a.createElement("td",null,e.quantidade," "))})))),"Total : R$ ",x.total.toFixed(2),r.a.createElement("br",null),r.a.createElement("button",{className:"btn blue waves-effect waves-light",onClick:O},"Confirmar",r.a.createElement("i",{className:"material-icons right"},"send")),r.a.createElement("button",{className:"btn red waves-effect waves-light",onClick:O},"Cancelar",r.a.createElement("i",{className:"material-icons right"},"cancel"))),r.a.createElement("button",{style:{width:"90%"},className:"btn green",onClick:e._hide.bind(e)},"block"==e.state.display?r.a.createElement("i",{className:"material-icons"},"expand_more"):r.a.createElement("i",{className:"material-icons"},"expand_less"))))}})))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pedidos:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,o,s,c,i,l,u,d,p,h,f,v,b,w,y;return m.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,m.a.awrap(fetch(k+"/select/pedidos/garcon/"+x.garcon));case 2:return e=E.sent,E.next=5,m.a.awrap(e.json());case 5:t=E.sent,a=[],n=!0,o=!1,s=void 0,E.prev=10,c=t[Symbol.iterator]();case 12:if(n=(i=c.next()).done){E.next=40;break}for(l=i.value,u=JSON.parse(l.produtos).reverse(),d=[],p=!0,h=!1,f=void 0,E.prev=19,v=u[Symbol.iterator]();!(p=(b=v.next()).done);p=!0)w=b.value,d.push(r.a.createElement("div",null,"(",w.quantidade,") ",r.a.createElement("strong",null,w.nome)));E.next=27;break;case 23:E.prev=23,E.t0=E.catch(19),h=!0,f=E.t0;case 27:E.prev=27,E.prev=28,p||null==v.return||v.return();case 30:if(E.prev=30,!h){E.next=33;break}throw f;case 33:return E.finish(30);case 34:return E.finish(27);case 35:y=r.a.createElement(P,{key:l.id_pedido,title:l.mesa,data:d,status:l.status,total:l.total,id:l.id_pedido}),a.push(y);case 37:n=!0,E.next=12;break;case 40:E.next=46;break;case 42:E.prev=42,E.t1=E.catch(10),o=!0,s=E.t1;case 46:E.prev=46,E.prev=47,n||null==c.return||c.return();case 49:if(E.prev=49,!o){E.next=52;break}throw s;case 52:return E.finish(49);case 53:return E.finish(46);case 54:a=a.reverse(),this.setState({pedidos:a});case 56:case"end":return E.stop()}}),null,this,[[10,42,46,54],[19,23,27,35],[28,,30,34],[47,,49,53]])}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.pedidos)}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mesa:a.props.mesa,categorias:null,display:x.display,cancelar:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,o,s,c,i,l,u;return m.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,m.a.awrap(fetch(k+"/database/categorias"));case 2:return e=d.sent,d.next=5,m.a.awrap(e.json());case 5:for(t=d.sent,a=[],n=!0,o=!1,s=void 0,d.prev=10,c=function(){var e=l.value;u=r.a.createElement("div",{onClick:function(){return x.categoria=e.nome},key:e.id_categoria},r.a.createElement(w.b,{className:"card",style:{fontSize:"18px"},to:"/mobile/categorias/produtos"},e.nome," ")),a.push(u)},i=t[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)c();d.next=19;break;case 15:d.prev=15,d.t0=d.catch(10),o=!0,s=d.t0;case 19:d.prev=19,d.prev=20,n||null==i.return||i.return();case 22:if(d.prev=22,!o){d.next=25;break}throw s;case 25:return d.finish(22);case 26:return d.finish(19);case 27:this.setState({categorias:a});case 28:case"end":return d.stop()}}),null,this,[[10,15,19,27],[20,,22,26]])}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q,{cancelar:this}),this.state.cancelar,r.a.createElement("h3",null,this.state.mesa," "),this.state.categorias)}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mesas:null,num_pedidos:0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,o,s,c,i,l,u,d=this;return m.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,m.a.awrap(fetch(k+"/database/mesas"));case 2:return e=p.sent,p.next=5,m.a.awrap(e.json());case 5:for(t=p.sent,a=[],n=!0,o=!1,s=void 0,p.prev=10,c=function(){var e=l.value;u=r.a.createElement("div",{onClick:function(){return x.mesa=e.nome},className:"hand",key:e.id_mesa,value:e.nome},r.a.createElement(w.b,{className:"card",style:{fontSize:"18px"},to:"/mobile/categorias"}," ",e.nome," ")),a.push(u)},i=t[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)c();p.next=19;break;case 15:p.prev=15,p.t0=p.catch(10),o=!0,s=p.t0;case 19:p.prev=19,p.prev=20,n||null==i.return||i.return();case 22:if(p.prev=22,!o){p.next=25;break}throw s;case 25:return p.finish(22);case 26:return p.finish(19);case 27:this.setState({mesas:a}),g.on("reload",(function(e){return d.setState({num_pedidos:d.state.num_pedidos+1})}));case 29:case"end":return p.stop()}}),null,this,[[10,15,19,27],[20,,22,26]])}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null," Maresias "),this.state.cancelar,this.state.mesas,r.a.createElement("footer",{style:{fontSize:"32px",position:"absolute",bottom:10,left:0,textAlign:"center",width:"100%"}},r.a.createElement(w.b,{to:"/mobile/pedidos"}," Pedidos ",this.state.num_pedidos)))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={categoria:a.props.categoria,produtos:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"_insert",value:function(e){var t=!1,a=!0,n=!1,r=void 0;try{for(var o,s=x.produtos[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;if(c.id_produto===e.id_produto){t=!0,c.quantidade+=1,c.total+=c.preco;break}}}catch(i){n=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}t||(e.quantidade=1,x.produtos.push(e),x.total+=e.preco),b.a.toast({displayLength:1e3,inDuration:100,outDuration:100,html:e.quantidade+" "+e.nome+" adicionado !"})}},{key:"componentDidMount",value:function(){var e,t,a,n,o,s,c,i,l,u,d,p=this;return m.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return e=this.state.categoria,h.next=3,m.a.awrap(fetch(k+"/select/produtos/categoria/"+e));case 3:return t=h.sent,h.next=6,m.a.awrap(t.json());case 6:for(a=h.sent,n=[],o=!0,s=!1,c=void 0,h.prev=11,i=function(){var e=u.value;d=r.a.createElement("div",{className:"card",onClick:function(){return p._insert(e)},key:e.id_produto},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-action"}," ",r.a.createElement("i",{className:"material-icons left"},"add")," ",e.nome," R$ ",e.preco.toFixed(2)," "))),n.push(d)},l=a[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)i();h.next=20;break;case 16:h.prev=16,h.t0=h.catch(11),s=!0,c=h.t0;case 20:h.prev=20,h.prev=21,o||null==l.return||l.return();case 23:if(h.prev=23,!s){h.next=26;break}throw c;case 26:return h.finish(23);case 27:return h.finish(20);case 28:this.setState({produtos:n});case 29:case"end":return h.stop()}}),null,this,[[11,16,20,28],[21,,23,27]])}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement("h3",null," ",this.state.categoria),this.state.produtos)}}]),t}(n.Component),q=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:"btn-floating btn-large waves-effect waves-light blue",onClick:window.goback.bind(this,this.props.cancelar)},r.a.createElement("i",{className:"material-icons"},"arrow_back"))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={status:a.props.status,aquivado:"block",socket:a.props.socket},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"_preparar",value:function(e,t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(fetch(k+"/edit/pedidos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({coluna1:"id_pedido",value1:t,coluna2:"status",value2:e})}));case 2:return a=n.sent,n.next=5,m.a.awrap(a.json());case 5:n.sent,this.setState({status:e});case 7:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"row",style:{display:this.state.arquivado}},4!==this.state.status&&r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card "+["green","blue","black"][this.state.status]+" darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},this.props.title," ",r.a.createElement("span",{className:""},"Pedido n\xb0 ",this.props.id)),r.a.createElement("div",null,this.props.data,["recebido","preparando","pronto"][this.state.status],r.a.createElement("br",null),"Total : ",this.props.total)),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn red"},"Cancelar"),2===this.state.status&&r.a.createElement("button",{className:"btn grey",onClick:this._preparar.bind(this,4)}," Arquivar ")))))}}]),t}(n.Component),M=N;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.2789d50c.chunk.js.map